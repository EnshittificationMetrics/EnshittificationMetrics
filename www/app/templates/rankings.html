{% extends "base.html" %}

{% block content %}

<h1>Enshittification Rankings:</h1>

Filter category type: <!-- ranking_cats -->
<button id="catAll">All</button> ~ 
<button id="catSocial">Social</button> ~ 
<button id="catCloud">Cloud</button> ~ 
<button id="catB2B">B2B</button> ~ 
<button id="catB2C">B2C</button> ~ 
<button id="catC2C">C2C</button> ~ 
<button id="catPlatform">tech platform</button> ~ 
<button id="catP2P">P2P</button>
<br> 

Sort type: <!-- ranking_sort -->
<button id="sortAlph">Alphabetically</button> ~ 
<button id="sortStage">by Stage</button> ~ 
<button id="sortAge">by Age</button>
<br>

Filter status type: <!-- ranking_stat -->
<button id="statusLive">Live</button> ~ 
<button id="statusPotential">Potential</button> ~ 
<button id="statusAll">Not Disabled</button>
<!-- doesn't work... <button id="statusDisabled">Disabled </button> -->
<br>

<!-- Sort order: --> <!-- display_order --> 
<!-- doesn't work... <button id="sortAsc">Ascending</button> ~   -->
<!-- doesn't work... <button id="sortDesc">Descending</button>  -->
<!-- <br>  -->

{% if current_user.role == 'administrator' %}
	Admin only view of some current_user values:<br>
	ranking_cats: <strong>{{current_user.ranking_cats}}</strong><br>
	ranking_sort: <strong>{{current_user.ranking_sort}}</strong><br>
	ranking_stat: <strong>{{current_user.ranking_stat}}</strong><br>
	display_order: <strong>{{current_user.display_order}}</strong><br>
	<br>
{% endif %}

<table border="3">
	<thead>
		<tr>
			<th>Stage 1</th>
			<th>Stage 2</th>
			<th>Stage 3</th>
			<th>Stage 4</th>
			<th>Dates</th>
			<th>Corporate family</th>
			<th>Summary</th>
		</tr>
	</thead>
	<tbody>
	{% for item in entities %}
		<tr>
			<td>
				{% if item.stage_current == 1 %}
					<strong>{{ item.name }}</strong>
				{% endif %}
			</td>
			<td>
				{% if item.stage_current == 2 %}
					<strong>{{ item.name }}</strong>
				{% endif %}
			</td>
			<td>
				{% if item.stage_current == 3 %}
					<strong>{{ item.name }}</strong>
				{% endif %}
			</td>
			<td>
				{% if item.stage_current == 4 %}
					<strong>{{ item.name }}</strong>
				{% endif %}
			</td>
			<td>
				{% if item.date_started and (item.date_started != 'UNK') %}
					{{ item.date_started }}
				{% endif %}
				{% if item.date_ended and (item.date_ended != 'None') %}
					<strong>to {{ item.date_ended }}</strong>
				{% endif %}
			</td>
			<td>
				{% if item.corp_fam and (item.corp_fam != 'None') %}
					{{ item.corp_fam }}<br>
				{% endif %}
			</td>
			<td>
				{% if item.summary %}
					{{ item.summary }}
				{% endif %}
			</td>
		</tr>
	{% endfor %}
	</tbody>
</table>

<script src="{{ url_for('static', filename='js/filtersortscript.js') }}" defer></script>

{% endblock %}
